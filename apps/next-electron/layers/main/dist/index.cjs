"use strict";
var require$$1 = require("electron");
var require$$2 = require("url");
var require$$1$1 = require("path");
function _interopNamespace(e) {
  if (e && e.__esModule)
    return e;
  var n = Object.create(null, { [Symbol.toStringTag]: { value: "Module" } });
  if (e) {
    Object.keys(e).forEach(function(k) {
      if (k !== "default") {
        var d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: function() {
            return e[k];
          }
        });
      }
    });
  }
  n["default"] = e;
  return Object.freeze(n);
}
const ALLOWED_ORIGINS_AND_PERMISSIONS = new Map([[new require$$2.URL("http://localhost:3000/").origin, new Set()]]);
const ALLOWED_EXTERNAL_ORIGINS = new Set([
  "https://github.com",
  "https://yerba.vercel.app",
  "https://yerba.ping.gg"
]);
require$$1.app.on("web-contents-created", (_, contents) => {
  contents.on("will-navigate", (event, url) => {
    const { origin } = new require$$2.URL(url);
    if (ALLOWED_ORIGINS_AND_PERMISSIONS.has(origin)) {
      return;
    }
    event.preventDefault();
    {
      console.warn("Blocked navigating to an unallowed origin:", origin);
    }
  });
  contents.session.setPermissionRequestHandler((webContents, permission, callback) => {
    var _a;
    const { origin } = new require$$2.URL(webContents.getURL());
    const permissionGranted = !!((_a = ALLOWED_ORIGINS_AND_PERMISSIONS.get(origin)) == null ? void 0 : _a.has(permission));
    callback(permissionGranted);
    if (!permissionGranted && true) {
      console.warn(`${origin} requested permission for '${permission}', but was blocked.`);
    }
  });
  contents.setWindowOpenHandler(({ url }) => {
    const { origin } = new require$$2.URL(url);
    if (ALLOWED_EXTERNAL_ORIGINS.has(origin)) {
      require$$1.shell.openExternal(url).catch(console.error);
    } else {
      console.warn("Blocked the opening of an unallowed origin:", origin);
    }
    return { action: "deny" };
  });
  contents.on("will-attach-webview", (event, webPreferences, params) => {
    const { origin } = new require$$2.URL(params.src);
    if (!ALLOWED_ORIGINS_AND_PERMISSIONS.has(origin)) {
      {
        console.warn(`A webview tried to attach ${params.src}, but was blocked.`);
      }
      event.preventDefault();
      return;
    }
    delete webPreferences.preload;
    delete webPreferences.preloadURL;
    webPreferences.nodeIntegration = false;
  });
});
async function createWindow() {
  const browserWindow = new require$$1.BrowserWindow({
    show: false,
    webPreferences: {
      nativeWindowOpen: true,
      webviewTag: false,
      preload: require$$1$1.join(__dirname, "../../preload/dist/index.cjs")
    },
    titleBarStyle: "hidden"
  });
  browserWindow.on("ready-to-show", () => {
    browserWindow == null ? void 0 : browserWindow.show();
    {
      browserWindow == null ? void 0 : browserWindow.webContents.openDevTools();
    }
  });
  const pageUrl = "http://localhost:3000/";
  await browserWindow.loadURL(pageUrl);
  return browserWindow;
}
async function restoreOrCreateWindow() {
  let window = require$$1.BrowserWindow.getAllWindows().find((w) => !w.isDestroyed());
  if (window === void 0) {
    window = await createWindow();
  }
  if (window.isMinimized()) {
    window.restore();
  }
  window.focus();
}
const isSingleInstance = require$$1.app.requestSingleInstanceLock();
if (!isSingleInstance) {
  require$$1.app.quit();
  process.exit(0);
}
require$$1.app.on("second-instance", restoreOrCreateWindow);
require$$1.app.disableHardwareAcceleration();
require$$1.app.on("window-all-closed", () => {
  if (process.platform !== "darwin") {
    require$$1.app.quit();
  }
});
require$$1.app.on("activate", restoreOrCreateWindow);
require$$1.app.whenReady().then(restoreOrCreateWindow).catch((e) => console.error("Failed create window:", e));
{
  require$$1.app.whenReady().then(() => Promise.resolve().then(function() {
    return /* @__PURE__ */ _interopNamespace(require("electron-devtools-installer"));
  })).then(({ default: installExtension, VUEJS3_DEVTOOLS }) => installExtension(VUEJS3_DEVTOOLS, {
    loadExtensionOptions: {
      allowFileAccess: true
    }
  })).catch((e) => console.error("Failed install extension:", e));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2pzIiwic291cmNlcyI6WyIuLi9zcmMvc2VjdXJpdHktcmVzdHJpY3Rpb25zLnRzIiwiLi4vc3JjL21haW5XaW5kb3cudHMiLCIuLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBwLCBzaGVsbCB9IGZyb20gXCJlbGVjdHJvblwiO1xuaW1wb3J0IHsgVVJMIH0gZnJvbSBcInVybFwiO1xuXG4vKipcbiAqIExpc3Qgb2Ygb3JpZ2lucyB0aGF0IHlvdSBhbGxvdyBvcGVuIElOU0lERSB0aGUgYXBwbGljYXRpb24gYW5kIHBlcm1pc3Npb25zIGZvciBlYWNoIG9mIHRoZW0uXG4gKlxuICogSW4gZGV2ZWxvcG1lbnQgbW9kZSB5b3UgbmVlZCBhbGxvdyBvcGVuIGBWSVRFX0RFVl9TRVJWRVJfVVJMYFxuICovXG5jb25zdCBBTExPV0VEX09SSUdJTlNfQU5EX1BFUk1JU1NJT05TID0gbmV3IE1hcDxcbiAgc3RyaW5nLFxuICBTZXQ8XG4gICAgfCBcImNsaXBib2FyZC1yZWFkXCJcbiAgICB8IFwibWVkaWFcIlxuICAgIHwgXCJkaXNwbGF5LWNhcHR1cmVcIlxuICAgIHwgXCJtZWRpYUtleVN5c3RlbVwiXG4gICAgfCBcImdlb2xvY2F0aW9uXCJcbiAgICB8IFwibm90aWZpY2F0aW9uc1wiXG4gICAgfCBcIm1pZGlcIlxuICAgIHwgXCJtaWRpU3lzZXhcIlxuICAgIHwgXCJwb2ludGVyTG9ja1wiXG4gICAgfCBcImZ1bGxzY3JlZW5cIlxuICAgIHwgXCJvcGVuRXh0ZXJuYWxcIlxuICAgIHwgXCJ1bmtub3duXCJcbiAgPlxuPihcbiAgaW1wb3J0Lm1ldGEuZW52LkRFViAmJiBpbXBvcnQubWV0YS5lbnYuVklURV9ERVZfU0VSVkVSX1VSTFxuICAgID8gW1tuZXcgVVJMKGltcG9ydC5tZXRhLmVudi5WSVRFX0RFVl9TRVJWRVJfVVJMKS5vcmlnaW4sIG5ldyBTZXQoKV1dXG4gICAgOiBbXVxuKTtcblxuLyoqXG4gKiBMaXN0IG9mIG9yaWdpbnMgdGhhdCB5b3UgYWxsb3cgb3BlbiBJTiBCUk9XU0VSLlxuICogTmF2aWdhdGlvbiB0byBvcmlnaW5zIGJlbG93IGlzIHBvc3NpYmxlIG9ubHkgaWYgdGhlIGxpbmsgb3BlbnMgaW4gYSBuZXcgd2luZG93XG4gKlxuICogQGV4YW1wbGVcbiAqIDxhXG4gKiAgIHRhcmdldD1cIl9ibGFua1wiXG4gKiAgIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vXCJcbiAqID5cbiAqL1xuY29uc3QgQUxMT1dFRF9FWFRFUk5BTF9PUklHSU5TID0gbmV3IFNldDxgaHR0cHM6Ly8ke3N0cmluZ31gPihbXG4gIFwiaHR0cHM6Ly9naXRodWIuY29tXCIsXG4gIFwiaHR0cHM6Ly95ZXJiYS52ZXJjZWwuYXBwXCIsXG4gIFwiaHR0cHM6Ly95ZXJiYS5waW5nLmdnXCIsXG5dKTtcblxuYXBwLm9uKFwid2ViLWNvbnRlbnRzLWNyZWF0ZWRcIiwgKF8sIGNvbnRlbnRzKSA9PiB7XG4gIC8qKlxuICAgKiBCbG9jayBuYXZpZ2F0aW9uIHRvIG9yaWdpbnMgbm90IG9uIHRoZSBhbGxvd2xpc3QuXG4gICAqXG4gICAqIE5hdmlnYXRpb24gaXMgYSBjb21tb24gYXR0YWNrIHZlY3Rvci4gSWYgYW4gYXR0YWNrZXIgY2FuIGNvbnZpbmNlIHRoZSBhcHAgdG8gbmF2aWdhdGUgYXdheVxuICAgKiBmcm9tIGl0cyBjdXJyZW50IHBhZ2UsIHRoZXkgY2FuIHBvc3NpYmx5IGZvcmNlIHRoZSBhcHAgdG8gb3BlbiB3ZWIgc2l0ZXMgb24gdGhlIEludGVybmV0LlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmVsZWN0cm9uanMub3JnL2RvY3MvbGF0ZXN0L3R1dG9yaWFsL3NlY3VyaXR5IzEzLWRpc2FibGUtb3ItbGltaXQtbmF2aWdhdGlvblxuICAgKi9cbiAgY29udGVudHMub24oXCJ3aWxsLW5hdmlnYXRlXCIsIChldmVudCwgdXJsKSA9PiB7XG4gICAgY29uc3QgeyBvcmlnaW4gfSA9IG5ldyBVUkwodXJsKTtcbiAgICBpZiAoQUxMT1dFRF9PUklHSU5TX0FORF9QRVJNSVNTSU9OUy5oYXMob3JpZ2luKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFByZXZlbnQgbmF2aWdhdGlvblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoaW1wb3J0Lm1ldGEuZW52LkRFVikge1xuICAgICAgY29uc29sZS53YXJuKFwiQmxvY2tlZCBuYXZpZ2F0aW5nIHRvIGFuIHVuYWxsb3dlZCBvcmlnaW46XCIsIG9yaWdpbik7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogQmxvY2sgcmVxdWVzdGVkIHVuYWxsb3dlZCBwZXJtaXNzaW9ucy5cbiAgICogQnkgZGVmYXVsdCwgRWxlY3Ryb24gd2lsbCBhdXRvbWF0aWNhbGx5IGFwcHJvdmUgYWxsIHBlcm1pc3Npb24gcmVxdWVzdHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvc2VjdXJpdHkjNS1oYW5kbGUtc2Vzc2lvbi1wZXJtaXNzaW9uLXJlcXVlc3RzLWZyb20tcmVtb3RlLWNvbnRlbnRcbiAgICovXG4gIGNvbnRlbnRzLnNlc3Npb24uc2V0UGVybWlzc2lvblJlcXVlc3RIYW5kbGVyKFxuICAgICh3ZWJDb250ZW50cywgcGVybWlzc2lvbiwgY2FsbGJhY2spID0+IHtcbiAgICAgIGNvbnN0IHsgb3JpZ2luIH0gPSBuZXcgVVJMKHdlYkNvbnRlbnRzLmdldFVSTCgpKTtcblxuICAgICAgY29uc3QgcGVybWlzc2lvbkdyYW50ZWQgPVxuICAgICAgICAhIUFMTE9XRURfT1JJR0lOU19BTkRfUEVSTUlTU0lPTlMuZ2V0KG9yaWdpbik/LmhhcyhwZXJtaXNzaW9uKTtcbiAgICAgIGNhbGxiYWNrKHBlcm1pc3Npb25HcmFudGVkKTtcblxuICAgICAgaWYgKCFwZXJtaXNzaW9uR3JhbnRlZCAmJiBpbXBvcnQubWV0YS5lbnYuREVWKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgJHtvcmlnaW59IHJlcXVlc3RlZCBwZXJtaXNzaW9uIGZvciAnJHtwZXJtaXNzaW9ufScsIGJ1dCB3YXMgYmxvY2tlZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIC8qKlxuICAgKiBIeXBlcmxpbmtzIHRvIGFsbG93ZWQgc2l0ZXMgb3BlbiBpbiB0aGUgZGVmYXVsdCBicm93c2VyLlxuICAgKlxuICAgKiBUaGUgY3JlYXRpb24gb2YgbmV3IGB3ZWJDb250ZW50c2AgaXMgYSBjb21tb24gYXR0YWNrIHZlY3Rvci4gQXR0YWNrZXJzIGF0dGVtcHQgdG8gY29udmluY2UgdGhlIGFwcCB0byBjcmVhdGUgbmV3IHdpbmRvd3MsXG4gICAqIGZyYW1lcywgb3Igb3RoZXIgcmVuZGVyZXIgcHJvY2Vzc2VzIHdpdGggbW9yZSBwcml2aWxlZ2VzIHRoYW4gdGhleSBoYWQgYmVmb3JlOyBvciB3aXRoIHBhZ2VzIG9wZW5lZCB0aGF0IHRoZXkgY291bGRuJ3Qgb3BlbiBiZWZvcmUuXG4gICAqIFlvdSBzaG91bGQgZGVueSBhbnkgdW5leHBlY3RlZCB3aW5kb3cgY3JlYXRpb24uXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvc2VjdXJpdHkjMTQtZGlzYWJsZS1vci1saW1pdC1jcmVhdGlvbi1vZi1uZXctd2luZG93c1xuICAgKiBAc2VlIGh0dHBzOi8vd3d3LmVsZWN0cm9uanMub3JnL2RvY3MvbGF0ZXN0L3R1dG9yaWFsL3NlY3VyaXR5IzE1LWRvLW5vdC11c2Utb3BlbmV4dGVybmFsLXdpdGgtdW50cnVzdGVkLWNvbnRlbnRcbiAgICovXG4gIGNvbnRlbnRzLnNldFdpbmRvd09wZW5IYW5kbGVyKCh7IHVybCB9KSA9PiB7XG4gICAgY29uc3QgeyBvcmlnaW4gfSA9IG5ldyBVUkwodXJsKTtcblxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVHlwZSBjaGVja2luZyBpcyBwZXJmb3JtZWQgaW4gcnVudGltZVxuICAgIGlmIChBTExPV0VEX0VYVEVSTkFMX09SSUdJTlMuaGFzKG9yaWdpbikpIHtcbiAgICAgIC8vIE9wZW4gZGVmYXVsdCBicm93c2VyXG4gICAgICBzaGVsbC5vcGVuRXh0ZXJuYWwodXJsKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9IGVsc2UgaWYgKGltcG9ydC5tZXRhLmVudi5ERVYpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkJsb2NrZWQgdGhlIG9wZW5pbmcgb2YgYW4gdW5hbGxvd2VkIG9yaWdpbjpcIiwgb3JpZ2luKTtcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGNyZWF0aW5nIG5ldyB3aW5kb3cgaW4gYXBwbGljYXRpb25cbiAgICByZXR1cm4geyBhY3Rpb246IFwiZGVueVwiIH07XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBWZXJpZnkgd2VidmlldyBvcHRpb25zIGJlZm9yZSBjcmVhdGlvblxuICAgKlxuICAgKiBTdHJpcCBhd2F5IHByZWxvYWQgc2NyaXB0cywgZGlzYWJsZSBOb2RlLmpzIGludGVncmF0aW9uLCBhbmQgZW5zdXJlIG9yaWdpbnMgYXJlIG9uIHRoZSBhbGxvd2xpc3QuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9sYXRlc3QvdHV0b3JpYWwvc2VjdXJpdHkjMTItdmVyaWZ5LXdlYnZpZXctb3B0aW9ucy1iZWZvcmUtY3JlYXRpb25cbiAgICovXG4gIGNvbnRlbnRzLm9uKFwid2lsbC1hdHRhY2gtd2Vidmlld1wiLCAoZXZlbnQsIHdlYlByZWZlcmVuY2VzLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IG9yaWdpbiB9ID0gbmV3IFVSTChwYXJhbXMuc3JjKTtcbiAgICBpZiAoIUFMTE9XRURfT1JJR0lOU19BTkRfUEVSTUlTU0lPTlMuaGFzKG9yaWdpbikpIHtcbiAgICAgIGlmIChpbXBvcnQubWV0YS5lbnYuREVWKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBgQSB3ZWJ2aWV3IHRyaWVkIHRvIGF0dGFjaCAke3BhcmFtcy5zcmN9LCBidXQgd2FzIGJsb2NrZWQuYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN0cmlwIGF3YXkgcHJlbG9hZCBzY3JpcHRzIGlmIHVudXNlZCBvciB2ZXJpZnkgdGhlaXIgbG9jYXRpb24gaXMgbGVnaXRpbWF0ZVxuICAgIGRlbGV0ZSB3ZWJQcmVmZXJlbmNlcy5wcmVsb2FkO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYHByZWxvYWRVUkxgIGV4aXN0cyAtIHNlZSBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2xhdGVzdC9hcGkvd2ViLWNvbnRlbnRzI2V2ZW50LXdpbGwtYXR0YWNoLXdlYnZpZXdcbiAgICBkZWxldGUgd2ViUHJlZmVyZW5jZXMucHJlbG9hZFVSTDtcblxuICAgIC8vIERpc2FibGUgTm9kZS5qcyBpbnRlZ3JhdGlvblxuICAgIHdlYlByZWZlcmVuY2VzLm5vZGVJbnRlZ3JhdGlvbiA9IGZhbHNlO1xuICB9KTtcbn0pO1xuIiwiaW1wb3J0IHsgQnJvd3NlcldpbmRvdyB9IGZyb20gXCJlbGVjdHJvblwiO1xuaW1wb3J0IHsgam9pbiB9IGZyb20gXCJwYXRoXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdpbmRvdygpIHtcbiAgY29uc3QgYnJvd3NlcldpbmRvdyA9IG5ldyBCcm93c2VyV2luZG93KHtcbiAgICBzaG93OiBmYWxzZSwgLy8gVXNlICdyZWFkeS10by1zaG93JyBldmVudCB0byBzaG93IHdpbmRvd1xuICAgIHdlYlByZWZlcmVuY2VzOiB7XG4gICAgICBuYXRpdmVXaW5kb3dPcGVuOiB0cnVlLFxuICAgICAgd2Vidmlld1RhZzogZmFsc2UsIC8vIFRoZSB3ZWJ2aWV3IHRhZyBpcyBub3QgcmVjb21tZW5kZWQuIENvbnNpZGVyIGFsdGVybmF0aXZlcyBsaWtlIGlmcmFtZSBvciBFbGVjdHJvbidzIEJyb3dzZXJWaWV3LiBodHRwczovL3d3dy5lbGVjdHJvbmpzLm9yZy9kb2NzL2xhdGVzdC9hcGkvd2Vidmlldy10YWcjd2FybmluZ1xuICAgICAgcHJlbG9hZDogam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcHJlbG9hZC9kaXN0L2luZGV4LmNqc1wiKSxcbiAgICB9LFxuICAgIHRpdGxlQmFyU3R5bGU6IFwiaGlkZGVuXCIsXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBJZiB5b3UgaW5zdGFsbCBgc2hvdzogdHJ1ZWAgdGhlbiBpdCBjYW4gY2F1c2UgaXNzdWVzIHdoZW4gdHJ5aW5nIHRvIGNsb3NlIHRoZSB3aW5kb3cuXG4gICAqIFVzZSBgc2hvdzogZmFsc2VgIGFuZCBsaXN0ZW5lciBldmVudHMgYHJlYWR5LXRvLXNob3dgIHRvIGZpeCB0aGVzZSBpc3N1ZXMuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsZWN0cm9uL2VsZWN0cm9uL2lzc3Vlcy8yNTAxMlxuICAgKi9cbiAgYnJvd3NlcldpbmRvdy5vbihcInJlYWR5LXRvLXNob3dcIiwgKCkgPT4ge1xuICAgIGJyb3dzZXJXaW5kb3c/LnNob3coKTtcblxuICAgIGlmIChpbXBvcnQubWV0YS5lbnYuREVWKSB7XG4gICAgICBicm93c2VyV2luZG93Py53ZWJDb250ZW50cy5vcGVuRGV2VG9vbHMoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBVUkwgZm9yIG1haW4gd2luZG93LlxuICAgKiBWaXRlIGRldiBzZXJ2ZXIgZm9yIGRldmVsb3BtZW50LlxuICAgKiBgZmlsZTovLy4uL3JlbmRlcmVyL2luZGV4Lmh0bWxgIGZvciBwcm9kdWN0aW9uIGFuZCB0ZXN0XG4gICAqL1xuICBjb25zdCBwYWdlVXJsID1cbiAgICBpbXBvcnQubWV0YS5lbnYuREVWICYmIGltcG9ydC5tZXRhLmVudi5WSVRFX0RFVl9TRVJWRVJfVVJMICE9PSB1bmRlZmluZWRcbiAgICAgID8gaW1wb3J0Lm1ldGEuZW52LlZJVEVfREVWX1NFUlZFUl9VUkxcbiAgICAgIDogXCJodHRwczovL3llcmJhLnBpbmcuZ2dcIjtcblxuICBhd2FpdCBicm93c2VyV2luZG93LmxvYWRVUkwocGFnZVVybCk7XG5cbiAgcmV0dXJuIGJyb3dzZXJXaW5kb3c7XG59XG5cbi8qKlxuICogUmVzdG9yZSBleGlzdGluZyBCcm93c2VyV2luZG93IG9yIENyZWF0ZSBuZXcgQnJvd3NlcldpbmRvd1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzdG9yZU9yQ3JlYXRlV2luZG93KCkge1xuICBsZXQgd2luZG93ID0gQnJvd3NlcldpbmRvdy5nZXRBbGxXaW5kb3dzKCkuZmluZCgodykgPT4gIXcuaXNEZXN0cm95ZWQoKSk7XG5cbiAgaWYgKHdpbmRvdyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgd2luZG93ID0gYXdhaXQgY3JlYXRlV2luZG93KCk7XG4gIH1cblxuICBpZiAod2luZG93LmlzTWluaW1pemVkKCkpIHtcbiAgICB3aW5kb3cucmVzdG9yZSgpO1xuICB9XG5cbiAgd2luZG93LmZvY3VzKCk7XG59XG4iLCJpbXBvcnQge2FwcH0gZnJvbSBcImVsZWN0cm9uXCI7XG5pbXBvcnQgXCIuL3NlY3VyaXR5LXJlc3RyaWN0aW9uc1wiO1xuaW1wb3J0IHtyZXN0b3JlT3JDcmVhdGVXaW5kb3d9IGZyb20gXCIvQC9tYWluV2luZG93XCI7XG5cblxuLyoqXG4gKiBQcmV2ZW50IG11bHRpcGxlIGluc3RhbmNlc1xuICovXG5jb25zdCBpc1NpbmdsZUluc3RhbmNlID0gYXBwLnJlcXVlc3RTaW5nbGVJbnN0YW5jZUxvY2soKTtcbmlmICghaXNTaW5nbGVJbnN0YW5jZSkge1xuICBhcHAucXVpdCgpO1xuICBwcm9jZXNzLmV4aXQoMCk7XG59XG5hcHAub24oXCJzZWNvbmQtaW5zdGFuY2VcIiwgcmVzdG9yZU9yQ3JlYXRlV2luZG93KTtcblxuXG4vKipcbiAqIERpc2FibGUgSGFyZHdhcmUgQWNjZWxlcmF0aW9uIGZvciBtb3JlIHBvd2VyLXNhdmVcbiAqL1xuYXBwLmRpc2FibGVIYXJkd2FyZUFjY2VsZXJhdGlvbigpO1xuXG4vKipcbiAqIFNob3V0IGRvd24gYmFja2dyb3VuZCBwcm9jZXNzIGlmIGFsbCB3aW5kb3dzIHdhcyBjbG9zZWRcbiAqL1xuYXBwLm9uKFwid2luZG93LWFsbC1jbG9zZWRcIiwgKCkgPT4ge1xuICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSAhPT0gXCJkYXJ3aW5cIikge1xuICAgIGFwcC5xdWl0KCk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBzZWUgaHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy92MTQteC15L2FwaS9hcHAjZXZlbnQtYWN0aXZhdGUtbWFjb3MgRXZlbnQ6ICdhY3RpdmF0ZSdcbiAqL1xuYXBwLm9uKFwiYWN0aXZhdGVcIiwgcmVzdG9yZU9yQ3JlYXRlV2luZG93KTtcblxuXG4vKipcbiAqIENyZWF0ZSBhcHAgd2luZG93IHdoZW4gYmFja2dyb3VuZCBwcm9jZXNzIHdpbGwgYmUgcmVhZHlcbiAqL1xuYXBwLndoZW5SZWFkeSgpXG4gIC50aGVuKHJlc3RvcmVPckNyZWF0ZVdpbmRvdylcbiAgLmNhdGNoKChlKSA9PiBjb25zb2xlLmVycm9yKFwiRmFpbGVkIGNyZWF0ZSB3aW5kb3c6XCIsIGUpKTtcblxuXG4vKipcbiAqIEluc3RhbGwgVnVlLmpzIG9yIHNvbWUgb3RoZXIgZGV2dG9vbHMgaW4gZGV2ZWxvcG1lbnQgbW9kZSBvbmx5XG4gKi9cbmlmIChpbXBvcnQubWV0YS5lbnYuREVWKSB7XG4gIGFwcC53aGVuUmVhZHkoKVxuICAgIC50aGVuKCgpID0+IGltcG9ydChcImVsZWN0cm9uLWRldnRvb2xzLWluc3RhbGxlclwiKSlcbiAgICAudGhlbigoe2RlZmF1bHQ6IGluc3RhbGxFeHRlbnNpb24sIFZVRUpTM19ERVZUT09MU30pID0+IGluc3RhbGxFeHRlbnNpb24oVlVFSlMzX0RFVlRPT0xTLCB7XG4gICAgICBsb2FkRXh0ZW5zaW9uT3B0aW9uczoge1xuICAgICAgICBhbGxvd0ZpbGVBY2Nlc3M6IHRydWUsXG4gICAgICB9LFxuICAgIH0pKVxuICAgIC5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgaW5zdGFsbCBleHRlbnNpb246XCIsIGUpKTtcbn1cblxuLyoqXG4gKiBDaGVjayBuZXcgYXBwIHZlcnNpb24gaW4gcHJvZHVjdGlvbiBtb2RlIG9ubHlcbiAqL1xuaWYgKGltcG9ydC5tZXRhLmVudi5QUk9EKSB7XG4gIGFwcC53aGVuUmVhZHkoKVxuICAgIC50aGVuKCgpID0+IGltcG9ydChcImVsZWN0cm9uLXVwZGF0ZXJcIikpXG4gICAgLnRoZW4oKHthdXRvVXBkYXRlcn0pID0+IGF1dG9VcGRhdGVyLmNoZWNrRm9yVXBkYXRlc0FuZE5vdGlmeSgpKVxuICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5lcnJvcihcIkZhaWxlZCBjaGVjayB1cGRhdGVzOlwiLCBlKSk7XG59XG5cbiJdLCJuYW1lcyI6WyJVUkwiLCJhcHAiLCJzaGVsbCIsIkJyb3dzZXJXaW5kb3ciLCJqb2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQSxNQUFNLGtDQUFrQyxJQUFJLElBa0J0QyxDQUFDLENBQUMsSUFBSUEsV0FBQUEsSUFBSSwwQkFBcUMsUUFBUSxJQUFJO0FBY2pFLE1BQU0sMkJBQTJCLElBQUksSUFBeUI7QUFBQSxFQUM1RDtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUE7QUFHRkMsV0FBQSxJQUFJLEdBQUcsd0JBQXdCLENBQUMsR0FBRyxhQUFhO0FBUzlDLFdBQVMsR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLFFBQVE7QUFDckMsVUFBQSxFQUFFLFdBQVcsSUFBSUQsV0FBSSxJQUFBO0FBQ3ZCLFFBQUEsZ0NBQWdDLElBQUksU0FBUztBQUMvQztBQUFBO0FBSUksVUFBQTtBQUVtQjtBQUN2QixjQUFRLEtBQUssOENBQThDO0FBQUE7QUFBQTtBQVUvRCxXQUFTLFFBQVEsNEJBQ2YsQ0FBQyxhQUFhLFlBQVksYUFBYTs7QUFDckMsVUFBTSxFQUFFLFdBQVcsSUFB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
